{"./":{"url":"./","title":"三福系统控制","keywords":"","body":"系统控制说明 文档描述：该文档描述对象为三福系统供应链相关控制说明 责任人：朱元寿 姓名 岗位 QQ 朱元寿 IT 479231708 powered by GitbookFile Modify: 2021-01-27 17:27:29 "},"000patr/Subdirecter1.html":{"url":"000patr/Subdirecter1.html","title":"主数据系统控制","keywords":"","body":"主数据系统控制 前言：主数据主要功能是管理三福商品、门店、供应商相关的基础属性平台。主数据平台共有三大模块，分别为：主数据管理模块、分类数据管理模块、基础数据管理模块。 主数据管理模块主要是商品维护、供应商维护。其中商品维护包含：商品建档、商品修改、商品定价、商品成本变更及审核；供应商维护包含：商品供应商-主/辅供应商建档、商品供应商-主/辅供应商修改，非供应商管理（新增、修改）。 分类数据管理模块主要是层级架构、商品属性设置。其中层级架构包含地点架构和商品架构，地点架构用于维护三福门店(shop)表数据（三福百货->店类型->地区->区域->区县设置）；商品架构用于维护商品层级属性（三福百货->分部->顾客群->品类组->品类->子品类）；其他还包含商品成分类型维护、成分原料维护、季节设置、主题设置、款式设置、差异维护。其中差异维护中有尺码差异维护。 基础数据管理模块主要涉及到：地点、分部、币种、计量单位组。 powered by GitbookFile Modify: 2021-01-25 11:23:30 "},"001part/dic_supplier/Sub_supplier.html":{"url":"001part/dic_supplier/Sub_supplier.html","title":"供应商模块","keywords":"","body":"1.供应商模块 系统相关表 DIC_SUPPLIER select * from dic_supplier DIC_SUPPLIER_BASE select * from dic_supplier_base 1.1维护人员 1.1.1供应商维护部门 供应链管理部 财务部 1.1.1.1岗位职责 供应链管 理部（具体岗位：供应商评估专员；跟单主管/专员）主要负责供应商的新增以及对供应商基本信息维护，如供应商名称、联系人、联系方式，预付比例等20余处信息维护，具体如下图： 财务部（商品中心财务部GZZ/义乌财务部YWZ）主要负责供应商的修改对供应商首付款方式进行维护，如供应商对公账号，身份证，付款方式，结算方式等10余处信息维护，具体如下图： 1.2程序控制 1.2.1新增程序控制 必填字段：供应商名称、联系人、电话号码、注册地址、供应商类型、供应商状态、公司类型、省份、城市、区县、法人代表、级别、票种、纳税人身份、社会信用代码。 a) 其中供应商名称只能包含中文或者括号，供应商名称不能重复，供应商名称不能超过100个字符 b) 供应商类型分为：ODM兼OEM、ODM、OEM、外协加工厂 c) 供应商状态分为：生效、失效 d) 公司类型分为：贸易型、制造型、贸易-制造型 e) 级别分为：A、B、C、D级 f) 票种分为：普票、专票 g) 纳税人身份分为：小规模纳税人、一般纳税人 h) 社会信用代码：不能重复 1.2.2修改程序控制 a) 在修改供应商时已经结束修改的供应商，不能再结束修改。 b) 修改供应商时只能修改当前用户修改的记录，若需修改他人记录，则需点击后修改 c) 当财务人员在维护收付款方式时： ①付款方式为“现金“可以更改为“转账“，为“转账”的就不能修改为其他付款方式。 ②付款方式为“现金”时，账户的相关信息必须为空。 ③付款方式为“转账”时，必须填写相关账户信息。 ④对公账号不为空时，与对公相关的收款人、收款人身份证号、开户银行不能为空。 ⑤个人账号不为空时，与个人相关的收款人、收款人身份证号、开户银行不能为空。 d) 付款方式和结算方式都不能为空。 ①结算方式不是\"货到付款\",首次付款日不能为空。 ②结算方式是\"货到付款\",首次付款日必须为空。 ③结算方式不是\"货到付款\",首次付款日为1月1次或者2月1次或者3月1次，首次付款日必须小于等于28。 ④结算方式不是\"货到付款\",首次付款日为1月2次，首次付款日必须小于等于14。 ⑤结算方式不是\"货到付款\",首次付款日为1月3次，首次付款日必须小于等于9。 ⑥启用日期\"一旦不为空后，就不能再修改。 e) 已发布的数据,不能修改主键、不能清空\"最近发布时间\" 1.2.3删除程序控制 a) 不能删除一个月前创建的供应商档案 b) 已发布的数据,不能删除（已发布表示已传中心） 1.3主/辅供应商关系 主供应商维护在新增/修改供应商界面维护，维护完成后点击结束修改按钮表示主供应商维护完成。 辅供应商维护在已审核供应商节点维护，已审核供应商选择你之前维护好的主供应商双击进入下层：供应商分部设置、已结束供应商设置、外协厂绑定 a) 供应商分部设置：新增辅供应商记录，维护后需点击结束修改按钮 b) 已结束供应商设置：查看已设置分部供应商信息，如需修改点击即可。 c) 外协厂绑定：用于外协厂绑定。 当主供应商在新增/修改供应商界面点击结束修改按钮时，系统会进行以下数据处理： a) 主供应商写入结束修改时间、最后修改时间、最后修改人 b) 将主供应商信息写入主供应商历史表（用于追踪当前人修改的数据信息） c) 将主供应商信息写入辅供应商表，保证主辅供应商主要信息一致（子供应商可以维护：店号、分部号、状态、级别；该信息可以与主供应商不一致） 1.4税票审核 税票审核功能主要是当主供应商的加价比例、批发占比主要信息发生变更时审核使用 供应商的加价比例、批发占比主要信息发生变更时未审核会导致第二天中心服务器开单失败 1.5表结构 1.5.1dic_supplier 字段 类型 为空 默认值 翻译 SHO_ID VARCHAR2(4) 店号 BRA_ID NUMBER(3) Y 部门编号 SUP_ID VARCHAR2(5) 供应商编号 SUP_NAME VARCHAR2(100) 供应商 LEGALPERSON VARCHAR2(8) Y 法人代表 LINKMAN VARCHAR2(8) 联系人 PHONENUMBER VARCHAR2(20) 电话号码 ADDRESS VARCHAR2(140) 注册地址 YEARSALE NUMBER(18,4) Y 年产能 DAYYIELD NUMBER(10) Y 日产量 SALEPATH VARCHAR2(4) Y 销售渠道 SUPRANK VARCHAR2(4) 'C' 级别 CREATETIME · Y 创建时间 SUP_TYPE VARCHAR2(20) CREATETORID VARCHAR2(6) Y 创建员工号 INSERTTIME DATE SYSDATE 新增时间 LASTMODIFYTIME DATE SYSDATE 最近修改时间 LASTPUBLISHTIME DATE Y 最近发布时间 SUP_STATUS VARCHAR2(1) 'A' · PARENTID VARCHAR2(5) Y 父供应商编号 COUNTYID NUMBER(10) 供应商地址所在区县 PROVINCEID NUMBER(10) 供应商地址所在省份 CITYNO NUMBER(10) 供应商地址所在城市 MEMO VARCHAR2(300) Y 备注 LASTRENAMETIME DATE Y 最近供应商名字变更时间 POSTCODE VARCHAR2(6) Y ATTACHNAME VARCHAR2(50) Y ATTACHMENT BLOB Y TAX_ID VARCHAR2(50) Y 纳税识别号 TICKETSPECIES VARCHAR2(6) Y 票种：普票，专票 HIKERATIO NUMBER(12,4) Y 加价比例 TAXPAYER NUMBER(1) Y 纳税人身份:0.小规模纳税人 1：一般纳税人 SUPACCOUNTNO VARCHAR2(30) Y 对公账号 SUPCASHIER VARCHAR2(100) Y 对公收款人 SUPIDCARD VARCHAR2(18) Y 对公身份证号 SUPBANKNAME VARCHAR2(100) Y 对公开户行 SUPPHONE VARCHAR2(15) Y 对公联系电话 PERSONACCOUNTNO VARCHAR2(30) Y 个人账号 PERSONCASHIER VARCHAR2(30) Y 个人收款人 PERSONIDCARD VARCHAR2(18) Y 个人身份证号 PERSONBANKNAME VARCHAR2(100) Y 个人开户行 PERSONPHONE VARCHAR2(15) Y 个人联系电话 SUPPAYMODE VARCHAR2(4) Y 付款方式 SUPSETTLEMENT VARCHAR2(10) Y 结算方式 CHECKLINKMAN VARCHAR2(10) Y 对账联系人 CHECKPHONE VARCHAR2(15) Y 对账联系电话 BEGINUSEDATE DATE Y 启用日期 EFFECTIVETIME DATE Y 纳税人身份生效日期 SUP_ID_BASE VARCHAR2(5) Y 基础供应商编号 AUDITTIME DATE Y 审核时间，对公帐户/加价比例最后一次审核时间 PAUSE NUMBER(1) 0 禁用，供应商合并 BEGINDAY NUMBER(3) Y 首次付款日 WHOLESALERATIO NUMBER(6,4) Y null 税票审核人 WHOLESALEAUDITTIME DATE Y WHOLESALEAUDITORID VARCHAR2(10) Y FINISHTIME DATE Y 结束时间 LASTMODIFIERID VARCHAR2(6) Y 最后更新时间 AUDITORID VARCHAR2(6) Y 审核人编号 PREPAYPCT NUMBER(18,4) Y 预付比例 PREECTIVETIME DATE Y 预付开始时间 PREFINISHTIME DATE Y 预付结束时间 1.5.2 dic_supplier_base 字段 类型 为空 默认值 翻译 SUP_ID_BASE VARCHAR2(5) 供应商编号 SUP_NAME VARCHAR2(100) 供应商 LEGALPERSON VARCHAR2(18) Y 法人代表 LINKMAN VARCHAR2(18) 联系人 PHONENUMBER VARCHAR2(20) 电话号码 ADDRESS VARCHAR2(140) 注册地址 SALEPATH VARCHAR2(4) Y 销售渠道 SUPRANK VARCHAR2(4) Y 'C' 级别 CREATETIME DATE 创建时间 SUP_TYPE VARCHAR2(20) 供应商类型 CREATETORID VARCHAR2(6) Y 创建员工号 INSERTTIME DATE SYSDATE 新增时间 LASTMODIFYTIME DATE Y SYSDATE 最近修改时间 LASTPUBLISHTIME DATE Y 最近发布时间 SUP_STATUS VARCHAR2(1) 'A' 供应商状态 COUNTYID NUMBER(10) Y 供应商地址所在区县 PROVINCEID NUMBER(10) Y 供应商地址所在省份 CITYNO NUMBER(10) Y 供应商地址所在城市 MEMO VARCHAR2(200) Y 备注 LASTRENAMETIME DATE Y 最近供应商名字变更时间 POSTCODE VARCHAR2(6) Y 邮编 TAX_ID VARCHAR2(50) Y 纳税识别号 TICKETSPECIES VARCHAR2(6) Y 票种：普票，专票 HIKERATIO NUMBER(12,4) Y 加价比例 TAXPAYER NUMBER(1) Y 纳税人身份:0.小规模纳税人 1：一般纳税人 SUPACCOUNTNO VARCHAR2(30) Y 对公账号 SUPCASHIER VARCHAR2(100) Y 对公收款人 SUPIDCARD VARCHAR2(18) Y 对公身份证号 SUPBANKNAME VARCHAR2(100) Y 对公开户行 SUPPHONE VARCHAR2(15) Y 对公联系电话 PERSONACCOUNTNO VARCHAR2(30) Y 个人账号 PERSONCASHIER VARCHAR2(100) Y 个人收款人 PERSONIDCARD VARCHAR2(18) Y 个人身份证号 PERSONBANKNAME VARCHAR2(100) Y 个人开户行 PERSONPHONE VARCHAR2(15) Y 个人联系电话 SUPPAYMODE VARCHAR2(4) Y 付款方式 SUPSETTLEMENT VARCHAR2(10) Y 结算方式 CHECKLINKMAN VARCHAR2(10) Y 对账联系人 CHECKPHONE VARCHAR2(15) Y 对账联系电话 BEGINUSEDATE DATE Y 启用日期 EFFECTIVETIME DATE Y 纳税人身份生效日期 SUPACCOUNTNO_TMP VARCHAR2(30) Y 上一版本对公账号 HIKERATIO_TMP NUMBER(12,4) Y 上一版本加价比例 LASTMODIFIERID VARCHAR2(6) Y 最后修改人ID FINISHTIME DATE Y 结束时间 AUDITORID VARCHAR2(6) Y 审核人ID AUDITTIME DATE Y 审核时间 WHOLESALERATIO NUMBER(6,4) Y 批发占比 ATTACHNAME VARCHAR2(50) Y 附件名称 ATTACHMENT BLOB Y 附件 COMPANY_TYPE VARCHAR2(30) Y 公司类型 PREPAYPCT NUMBER(18,4) Y 预付比例 PREECTIVETIME DATE Y 预付开始时间 PREFINISHTIME DATE Y 预付结束时间 BEGINDAY NUMBER(3) Y 首次付款日 powered by GitbookFile Modify: 2021-01-27 17:33:06 "},"002part/dic_goods/Sub_goods.html":{"url":"002part/dic_goods/Sub_goods.html","title":"商品模块","keywords":"","body":"1.商品模块 1.1涉及岗位 主数据商品建档及维护工作主要涉及到三个主要岗位：买手、企划、跟单 a) 买手工作主要负责商品的基础建档 b) 企划工作主要负责商品定价、调价 c) 跟单工作主要是负责商品涉及到发货流程维护，如包装基数 商品部分属性调整时审核人员： a) 是否开票发生变更：由各分部跟单主管在待审核是否开票变更窗口审核 b) 商品的成本变更：主要由各分部经理审核 1.2程序控制 1.2.1 程序控制主要分三种类型控制：新增、修改、删除 1.2.1.1商品新增程序控制 1.2.1.1.1建档必填字段 说明：由于三福存在多个分部的情况，所以在建档时就需要考虑分部差异化，每一个分部必填字段都会不一样，当然也存在共同必填字段，如：分部 分部共同必填字段有：分部、仓库、顾客群、品类组、品类、子品类、商品类别、一般税率、是否开票、主题、好产品、顾客类型、是否质检、计量单位、款式、进价、品牌、小规模税率、最低批发占比、交期、季节、计量单位组、是否易碎、供应商 每个分部必填字段 a) 男装必填字段：腰型、是否有内口袋、套装类型、厚度、领型、衣长、供应商到仓日期、裤长、花版类型、订货基数、脚口、版型、羽绒类别、加工利润、弹力指数、面料、外套类目、针数、廓形、袖型、袖长、衣门禁 b) 女装必填字段：外套类目、袖型、厚度、腰型、袖长、加工利润、花版类型、衣长、裙长、衣门禁、面料、供应商到仓日期、领型、订货基数、廓形、裤长 c) 内衣必填字段：袜型、罩杯里料、模杯面料、挡位款式、海绵、腰型、廓形、搭扣排数、织法、双数、加工利润、厚薄、有无钢圈、订货基数、罩杯款式、后比、肩带宽度、文胸类型、加绒、供应商到仓日期、罩杯厚度、有插垫、内裤款式、功能、功效、 d) 美妆必填字段：供应商到仓日期、刷毛材质、加工利润、保质期、香味、香调、备案号、经营状态、；镜框材质、订货基数、是否定制、使用性别 e) 淘品必填字段：导热体直径、支数、电源方式、表扣、拉链位、适用年龄、最高温度、伞杆材质、钥匙挂钩、接口类型、是否线控、是否可擦、保修、识字卡类型、导热体材质、加工利润、墨水是否速干、充电时长、是否带坠、钥匙挂钩、平均温度、表壳材质、电池类型、额定电压、电吹风风嘴样式、眼镜形状、内存容量、供应商到仓库日期、适用发质、档位、经营状态、表底、打开尺寸、表盘、适用手机机型、连续使用时间、防水深度、封面材质、页数、鞋底厚度、书写粗细、是否内置Wi-Fi、打开方式、幅面、表盘直径、订货基数、填充物、表盘厚度、是否多层、功能、有无麦克风、容量、是否有声、规格、内置蓝牙、鞋底材质、玩具类型、装订方式、表带材质、伞布材质、周长、机芯类型、温馨提示、坠子材质、保温时长、手表镜面材质、最佳造型时间、笔芯颜色、镜片材质、开关类型、笔杆材质、段数、额定功率、伞面涂层、功能类型、光源类型 f) 鞋包必填字段：侧帮、肩带可调节、鞋头款式、防水强度、开口深度、是否可背负、内部结构、订货基数、前掌宽、是否放A4文件、跟底款式、有无拉杆、里料材质、箱包外袋种类、鞋面材质、鞋跟高、鞋帮高、内里材质、肩带样式、后帮、版型、滚轮样式、肩带长度、有无配件、筒围、供应商到仓库日期、厚薄、鞋底材质、鞋制作工艺、提拎部件类型、加工利润、可折叠、腰带带扣款式、带扣材质、规格、踝围、闭合方式、鞋垫材质、五金颜色、皮质特征、承重量 1.2.1.1.2系统默认值 点击新增时系统默认值设置方式：DEFAULIEST a) 映射字段、税票编码、执行标准、安全技术类别：根据商品税票编码基础表数据给默认值（DIC_CLS_TAX） b) 供应商到仓库日期、订货基数：男女装分部设置为【1】，其他分部设置为【null】 c) 是否易碎：男女内分部设置为【否】，其他分部设置为【是】 d) 是否质检：男女内鞋包分部设置为【是】，后勤赠品美妆欧好分部设置为【否】，淘品分部子品类在（开口拖、礼帽、马尾夹、墨水、铅笔、青蛙夹、全包拖、人字拖、水彩笔、塑料杯、锁包扣、陶瓷杯、头箍、西瓜帽、橡巾、小风扇、鸭夹、颜料、一字夹、一字拖、渔夫帽、圆珠笔、爪夹、中性笔、组合发饰、组合套装）以上子品类中默认为【是】，否则默认为【否】 e) 最低批发占比：所有分部开票供应商设置为【0.1】 f) 小规模税率：所有分部默认值为【0.01】 触发器默认 a) 鞋包YWZ商品款式为【鞋】，将写入大件商品表（CFG_GOOD_LARGES） b) 赠品部门定价必须为【0】 c) 只有后勤部门的饮料才允许店零星采购 d) 面料价格+辅料价格+设计价格+设计利润+加工价格+其他工艺=进价 e) 差异值、差异类型必须是标准组合 Ø 系统提示 a) 订货基数与包装基数不一致时系统会出现提示信息 1.2.1.2商品修改程序控制 商品经止退换修改：若商品有条码，则同步更新条码禁止退换属性 商品设置为不开票：最低批发占比同步设置为【否】，且将开票状态设置为【待审核】，跟单主管在待审核是否开票变更窗口审核 美妆分部顾客群为：彩妆、护肤当定价大于【0】时，商品下所有条码必须摄入供应商条码 当商品仍有库存时，不可修改包装基数 包装基数必须在【1-100】之间 商品定价时系统进行以下处理： a) 将商品信息写入DIC_GOODS_SUPPLIER表 b) 更新IC_GOODS_SUPPLIER表的新增时间为当前时间，最后修改时间为当前时间 c) 更新DIC_ARTICLES表新增时间为当前时间，最后修改时间为当前时间 d) 更新DIC_GOODSCOMPOSITION表新增时间为当前时间，最后修改时间为当前时间 e) 更新DIC_GOODSOFPICTURE表新增时间为当前时间，最后修改时间为当前时间 f) 更新DIC_SUP_BARCODE表新增时间为当前时间，最后修改时间为当前时间 已发布的数据不能修改主键，不能清空最近发布时间 不能修改已经订货的商品类别和地区 不能修改有库存的商品品名、风格、所属地区等信息 不能修改一个月前建档的商品品名、风格、所属地区等信息 不能清楚商品的定价 不能修改30天前商品的定价 不能修改有库存的商品定价 已经定价的商品不能修改进价和进价组成相关价格和是否电商专供款 已经定价的商品不能直接修改商品的主供应商，需做变更 已经定价的商品不能修改会员折扣且会员折扣必须在【0-85】之间 1.2.1.3商品删除程序控制 不能删除一个月前创建的供应商档案 已发布的数据,不能删除（已发布表示已传中心） 1.2.2供应商条码相关控制 美妆69码长度必须时【13】位 69码删除时同步更新WMS数据【DIC_WMSGOODS】 数据新增时，若商品已经定价则自动新增时间为当前时间，最后修改时间为当前时间 1.2.3商品图片相关控制 数据新增时，若商品已经定价则自动新增时间为当前时间，最后修改时间为当前时间 1.2.4商品成分相关控制 新建档的商品必须设置相应的成分明细 每个成分组成的原料之和需等于【100%或者0%】 一个商品中，成分的备注字段最多只能一行 标签设计的角度看，一个商品成分不能超过5种 1.2.5商品供应商相关控制 存在“变更主供应商”记录的数据，不能删除供应商档案 存在“成本变更”记录的数据，不能删除供应商档案 1.3 表结构 1.3.1 DIC_GOODS 字段 类型 为空 默认值 翻译 BRA_ID NUMBER(3) SHO_ID VARCHAR2(4) 配送中心店号 GOO_ID VARCHAR2(13) 货号 GOO_NAME VARCHAR2(20) 品名 MATERIAL VARCHAR2(10) Y 质地 PATTERN VARCHAR2(10) Y 款式 SPECS VARCHAR2(20) 特征 BUYERID VARCHAR2(6) Y 采购员ID SUP_ID VARCHAR2(5) 主供应商ID INPRICE NUMBER(18,4) 进价 ADVICEPRICE NUMBER(18,4) Y 建议定价 PRICE NUMBER(18,4) Y 定价 PAUSE NUMBER(1) 0 禁用 USENOTE VARCHAR2(30) Y 商品使用方法 CREATETIME DATE (SYSDATE) 创建时间 PINYIN VARCHAR2(20) Y 商品的拼音 GOOSTYLE VARCHAR2(4) Y 风格 THEME VARCHAR2(30) Y 主题 CUSTYPENO NUMBER(3) 顾客类型 ADVICESALEDAYS NUMBER(10) Y 建议销售期 ORDERSTARTAMOUNT NUMBER(18,4) Y 起订量 DELIVERDAYS NUMBER(10) 交期 ORDERBASEAMOUNT NUMBER(5) 订货基数 THUMBNAIL1 BLOB Y 缩略图 MUSTORDER NUMBER(1) 0 必订 ORDERENDDATE DATE Y (TRUNC(SYSDATE)) 止订日期 COLORSTARTAMOUNT NUMBER(18,4) Y 色起订量 SIZESTARTAMOUNT NUMBER(18,4) Y 码起订量 SEASON VARCHAR2(10) 季节 MINHANDAMOUNT NUMBER(10) Y 最低现货量 PRICETIME DATE Y 定价时间 BAKCODE VARCHAR2(13) 备用货号 POPULARITY VARCHAR2(10) Y 流行度 DESIGNMODE VARCHAR2(20) Y 设计模式 GOOTYPEID CHAR(1) -1 商品类别 GOOAREAID VARCHAR2(2) Y 所属地区（针对地区零星采购） SETTLEMENT VARCHAR2(10) Y 结算地 WASHINGLIST VARCHAR2(100) Y 洗涤说明 MININPRICE NUMBER(18,4) Y 最低进价 MINDATETIME DATE Y 最低进价的日期 SERIES VARCHAR2(20) Y 系列 FABRICPRICE NUMBER(18,2) Y null 面料价格 ACCESSORIESPRICE NUMBER(18,2) Y null 辅料价格 OTHERPRICE NUMBER(18,2) Y 其它工艺价格 ISNEWGOODS1 NUMBER(1) Y -1 PICTURE1 BLOB Y 图片 EXECUTIVESTD VARCHAR2(30) Y 执行标准编号 SAFETYTYPE VARCHAR2(30) Y 安全级别 TOUCHCLASS VARCHAR2(6) Y 接触类型 ISSKU NUMBER(1) 0 关键单品 ADVICEINPRICE NUMBER(18,4) Y 建议进价 FIRSTINPRICE NUMBER(18,4) Y 第一次的进货价格 ISUM NUMBER(1) 0 集中管理 SIMILARGOODID VARCHAR2(13) Y 相似品货号 ISNEWGOOD NUMBER(1) Y -1 WARMDEGREE NUMBER(2) Y 保暖度 MUSTENDDATE DATE Y MEMO VARCHAR2(2000) Y 备注 ORDERABLE_IND NUMBER(1) Y 1 可订购 SELLABLE_IND NUMBER(1) 1 可销售 INVENTORY_IND NUMBER(1) 1 可库存 INSERTTIME DATE Y 新增时间 LASTMODIFYTIME DATE Y 最近修改时间 LASTPUBLISHTIME DATE Y 最近发布时间 DIFF_GROUP_ID1 VARCHAR2(10) Y 差异组编号1 DIFF_GROUP_ID2 VARCHAR2(10) Y 差异组编号2 DIFF_ID1 VARCHAR2(1000) Y 差异编号1 DIFF_ID2 VARCHAR2(1000) Y 差异编号2 CUSGROUPNO NUMBER(3) 顾客群编号 CATEGORYGROUPNO NUMBER(3) 品类组编号 CATEGORYNO NUMBER(4) 品类编号 SUBCATEGORYNO NUMBER(4) 子品类编号 UPDATETYPE NUMBER(38) 0 控制是否允许更新 GOODS_STAGE NUMBER(1) Y 波段 SUP_PACK_AMOUNT NUMBER(5) Y 订货基数倍数 DESIGNPRICE NUMBER(18,4) 0 设计价格 DESIGNPROFITPRICE NUMBER(18,4) 0 设计利润 PROCPRICE NUMBER(18,4) 0 加工价格 PROCPROFITPRICE NUMBER(18,4) 0 加工利润 UNGOODS NUMBER(1) 0 非商品 SUPTOWHDAYS NUMBER(4) 0 供应商到仓库日期 LACK NUMBER(1) 0 缺货 ORDERSTARTDATE DATE Y (TRUNC(SYSDATE)) 起订日期 NOT_EXCHANGE NUMBER(1) Y 0 禁止退换货 STRUCTURE VARCHAR2(20) Y 品类(男装长度用) MODIFIER VARCHAR2(6) Y 最近修改人 PRODUCT_DESC VARCHAR2(1000) Y 产品说明 TEMP_BRA_ID NUMBER(3) Y TEMP_CUSGROUPNO NUMBER(3) Y 临时顾客群编号 TEMP_CATEGORYGROUPNO NUMBER(3) Y 临时品类组编号 TEMP_CATEGORYNO NUMBER(4) Y 临时品类编号 TEMP_SUBCATEGORYNO NUMBER(4) Y 临时子品类编号 TEMP_SUP_ID VARCHAR2(5) Y 临时主供应商ID STANDARD VARCHAR2(16) Y 包规格 SHELF_LIFE VARCHAR2(20) Y 保质期 MADE_IN VARCHAR2(50) Y 产地 USE_CYCLE VARCHAR2(30) Y 使用周期 BAND_LEVEL VARCHAR2(30) Y 品牌等级 HARDWARE_COLOR VARCHAR2(30) Y 五金颜色 NET_WEIGHT NUMBER(18,4) Y 净含量 HEAD_SIZE VARCHAR2(30) Y 头围尺寸 BIND_AMOUNT VARCHAR2(30) Y 捆绑量 FLOWCHOOSEGOO_ID NVARCHAR2(80) Y 波段选款货号 TAX_RATE NUMBER(12,4) Y 一般税率 SMALL_TAXRATE NUMBER(12,4) Y 0.01 小规模税率 UNITS_ID VARCHAR2(8) Y 单位ID UNITS_GROUPS_ID VARCHAR2(8) Y 单位组ID IS_NICE NUMBER(1) Y 好产品，主数据项目新增20180720 SAFE_TYPE VARCHAR2(30) Y 安全技术类别 TAX_NUMBER VARCHAR2(19) Y 税票编码 MAPFIELD VARCHAR2(30) Y 映射字段 SELLING_POINT VARCHAR2(200) Y 卖点 SCENE VARCHAR2(50) Y 场景 THESAURUS VARCHAR2(50) Y 词库 OPEN_SIZE VARCHAR2(20) Y 打开尺寸 REMINDER VARCHAR2(50) Y 温馨提示 APPLY_MODEL VARCHAR2(30) Y 适用手机机型 WIRE_LENGTH VARCHAR2(20) Y 缆线长度 PERIMETER VARCHAR2(20) Y 周长 CAPACITY VARCHAR2(20) Y 容量 VOLUME VARCHAR2(20) Y 体积 PACK_VOLUME VARCHAR2(20) Y 包装体积 OPEN_DEPTH VARCHAR2(20) Y 开口深度 ANKLE_GIRTH VARCHAR2(20) Y 踝围 CANISTER_GIRTH VARCHAR2(20) Y 筒围 HEIGHT_OF_SHOE_UPPER VARCHAR2(20) Y 鞋帮高 WIDTH_OF_FOREFEET VARCHAR2(20) Y 前掌宽 HEIGHT_OF_HEEL VARCHAR2(20) Y 鞋跟高 NET_CONTENT VARCHAR2(20) Y 净含量 RECORD_NUMBER VARCHAR2(50) Y 备案号 GROSS_WEIGHT NUMBER(18,4) Y 毛重 HAS_PACKING_BOX NUMBER(1) Y 是否有包装盒 IS_INK_QUICK_DRY NUMBER(1) Y 墨水是否速干 MATERIAL_PENHOLDER VARCHAR2(20) Y 笔杆材质 WRITE_THICKNESS VARCHAR2(20) Y 书写粗细 REFILL_COLOR VARCHAR2(20) Y 笔芯颜色 CAN_ERASE NUMBER(1) Y 是否可擦 BRANCH_AMOUNT VARCHAR2(20) Y 支数 RATED_POWER VARCHAR2(20) Y 额定功率 RATED_VOLTAGE VARCHAR2(20) Y 额定电压 WORKING_MODE VARCHAR2(10) Y 工作模式 GEAR VARCHAR2(10) Y 档位 DRIER_MOUTH_STYLE VARCHAR2(20) Y 电吹风风嘴样式 POWER_MODE VARCHAR2(10) Y 电源方式 CHARGE_DURATION VARCHAR2(20) Y 充电时长 IS_AUTO_DISCONNECT NUMBER(1) Y 是否自动断电 USE_DURATION VARCHAR2(10) Y 连续使用时间 INTERFACE_TYPE VARCHAR2(20) Y 接口类型 IS_WIRE_CONTROL NUMBER(1) Y 是否线控 HAS_MICROPHONE NUMBER(1) Y 有无麦克风 HAS_PENDANT NUMBER(1) Y 是否带坠 MATERIAL_PENDANT VARCHAR2(20) Y 坠子材质 EXTENTED_CHAIN VARCHAR2(10) Y 延长链 IS_MULTI_LAYER NUMBER(1) Y 是否多层 FILLER VARCHAR2(10) Y 填充物 APPLY_AGE VARCHAR2(20) Y 适用年龄 AVERAGE_TEMPERATURE VARCHAR2(10) Y 平均温度 HIGHEST_TEMPERATURE VARCHAR2(10) Y 最高温度 KEEP_WARM_DURATION VARCHAR2(20) Y 保温时长 MATERIAL_WATCH_FACE VARCHAR2(20) Y 手表镜面材质 MOVEMENT_TYPE VARCHAR2(30) Y 机芯类型 MATERIAL_WATCH_TAPE VARCHAR2(10) Y 表带材质 MATERIAL_WATCH_SHELL VARCHAR2(10) Y 表壳材质 WATERPROOFING_DEPTH VARCHAR2(20) Y 防水深度 DIAL_THICKNESS VARCHAR2(10) Y 表盘厚度 DIAL_DIAMETER VARCHAR2(10) Y 表盘直径 MATERIAL_COVER VARCHAR2(10) Y 封面材质 BINDING_MODE VARCHAR2(20) Y 装订方式 PAGE_COUNT VARCHAR2(10) Y 页数 PAPER_FORMAT VARCHAR2(4) Y 幅面 MATERIAL_LENS VARCHAR2(10) Y 镜片材质 HAS_SOUND NUMBER(1) Y 是否有声 HAS_WIFI NUMBER(1) Y 是否内置Wi-Fi MATERIAL_CLOTH VARCHAR2(10) Y 伞布材质 MATERIAL_POLE VARCHAR2(20) Y 伞杆材质 OPEN_MODE VARCHAR2(10) Y 打开方式 COATING_OF_UMBRELLA VARCHAR2(10) Y 伞面涂层 FUNCTION_TYPE VARCHAR2(20) Y 功能类型 DIAMETER_OF_HEAT VARCHAR2(20) Y 导热体直径 MATERIAL_HEAT VARCHAR2(16) Y 导热体材质 PERFECT_DURATION VARCHAR2(20) Y 最佳造型时间 SUIT_HAIR VARCHAR2(10) Y 适用发质 SEGMENT_NUMBER VARCHAR2(10) Y 段数 LIGHT_TYPE VARCHAR2(10) Y 光源类型 SWITCH_TYPE VARCHAR2(10) Y 开关类型 BATTERY_CAPACITY VARCHAR2(20) Y 电池容量 BATTERY_TYPE VARCHAR2(20) Y 电池类型 HAS_BLUETOOTH NUMBER(1) Y 内置蓝牙 MATERIAL_INNER VARCHAR2(20) Y 内里材质 MATERIAL_SHOE_PAD VARCHAR2(20) Y 鞋垫材质 MATERIAL_SHOE_COVER VARCHAR2(20) Y 鞋面材质 CORTICAL_FEATHURES VARCHAR2(20) Y 皮质特征 PATTERN_SHOE_HEAD VARCHAR2(10) Y 鞋头款式 PATTERN_HELL_BOTTOM VARCHAR2(10) Y 跟底款式 CLOSE_MODE VARCHAR2(16) Y 闭合方式 PRODUCE_TECHNOLOGY VARCHAR2(10) Y 鞋制作工艺 CARRING_PARTS_TYPE VARCHAR2(16) Y 提拎部件类型 INNER_STRUCTURE VARCHAR2(16) Y 内部结构 TYPE_OF_OUTER_BAG VARCHAR2(10) Y 箱包外袋种类 CAN_FOLD NUMBER(1) Y 可折叠 MATERIAL_INNER_MAT VARCHAR2(10) Y 里料材质 STRAP_STYLE VARCHAR2(6) Y 肩带样式 STRAP_CAN_ADJUST NUMBER(1) Y 肩带可调节 HAS_PARTS NUMBER(1) Y 有无配件 PATTERN_BELT_BUCKLE VARCHAR2(10) Y 腰带带扣款式 MATERIAL_BELT_BUCKLE VARCHAR2(10) Y 带扣材质 IS_CUSTOMIZED NUMBER(1) Y 是否定制 SUIT_SEX VARCHAR2(20) Y 适用性别 EFFECT VARCHAR2(20) Y 功效 SUIT_SKIN VARCHAR2(16) Y 适用肤质 NUMBER_OF_NEEDLE VARCHAR2(10) Y 针数 FOOT_MOUTH VARCHAR2(10) Y 脚口 DOWN_CATEGORY VARCHAR2(10) Y 羽绒类别 COORDINATE_CATEGORY VARCHAR2(10) Y 套装类型 ELASTIC_INDEX VARCHAR2(10) Y 弹力指数 SKIRT_LENGTH VARCHAR2(6) Y 裙长 GRAM_WEIGHT VARCHAR2(20) Y 克重 PATTERN_OF_CUP VARCHAR2(20) Y 罩杯款式 MATERIAL_CUP_INNER VARCHAR2(10) Y 罩杯里料 FABRIC_OF_CUP VARCHAR2(10) Y 模杯面料 NUMBER_OF_CLASP VARCHAR2(10) Y 搭扣排数 BRASSIERE_CUP_TYPE VARCHAR2(4) Y 文胸杯型 IS_WITH_VELVET VARCHAR2(6) Y 加绒 SOCK_TYPE VARCHAR2(16) Y 袜型 WIDTH_OF_CUP VARCHAR2(10) Y 杯罩厚度 BACK_WING VARCHAR2(10) Y 后比 SPONGE VARCHAR2(10) Y 海棉 WIDTH_SHOULDER_BAND VARCHAR2(10) Y 肩带宽度 HAS_STEEL_RING NUMBER(1) Y 有无钢圈 HAS_INSERT_PAD NUMBER(1) Y 有插垫 PATTERN_UNDERPANTS VARCHAR2(10) Y 内裤款式 PATTERN_CROTCH VARCHAR2(10) Y 档位款式 WEAVE_METHOD VARCHAR2(10) Y 织法 COLLAR_TYPE VARCHAR2(20) Y 领型 FABRIC VARCHAR2(20) Y 面料 TROUSER_LENGTH VARCHAR2(20) Y 裤长 LENGTH_OF_SLEEVE VARCHAR2(10) Y 袖长 LENGTH_OF_CLOTHES VARCHAR2(10) Y 衣长 COAT_CATEGORY VARCHAR2(10) Y 外套类目 THICKNESS VARCHAR2(10) Y 厚度 FLOWER_CATEGORY VARCHAR2(20) Y 花版类型 TYPE_VERSION VARCHAR2(10) Y 版型 USE_FUNCTION VARCHAR2(10) Y 功能 WIDTH VARCHAR2(20) Y 厚薄 PACK_MODE VARCHAR2(20) Y 包装方式 SALE_STATE VARCHAR2(20) Y 经营状态 MATERIAL_TREAD VARCHAR2(10) Y 鞋底材质 SILHOUETTE VARCHAR2(10) Y 廓型 WAIST_TYPE VARCHAR2(10) Y 腰型 SLEEVE_TYPE VARCHAR2(10) Y 袖型 CLOTHING_PLACKET VARCHAR2(20) Y 衣门襟 HAS_INNER_POCKET NUMBER(1) Y 是否有内口袋 SPESC_TYPE VARCHAR2(10) Y 规格类型 AROMA VARCHAR2(10) Y 香味 FRAGRANCE VARCHAR2(10) Y 香调 MATERIAL_BRUSH VARCHAR2(10) Y 刷毛材质 MATERIAL_FRAME VARCHAR2(10) Y 镜框材质 EVEN_NUMBERS VARCHAR2(10) Y 双数 GLASSES_SHAPE VARCHAR2(10) Y 眼镜形状 SHOES_BOOTOM_THICK VARCHAR2(10) Y 鞋底厚度 GUARANTEE VARCHAR2(10) Y 保修 DIAL_BUCKLE VARCHAR2(16) Y 表扣 DIAL_BOOTOM VARCHAR2(10) Y 表底 DIAL_COVER VARCHAR2(10) Y 表盘 KEY_HOOK VARCHAR2(6) Y 钥匙挂钩 ZIPPER_POSITION VARCHAR2(10) Y 拉链位 TOY_TYPE VARCHAR2(10) Y 玩具类型 LITER_CARD_TYPE VARCHAR2(10) Y 识字卡类型 MEMORY_CAPACITY VARCHAR2(10) Y 内存容量 CHAIN_STYLE VARCHAR2(10) Y 链子样式 SHOE_BACK VARCHAR2(10) Y 后帮 SHOE_SIDE VARCHAR2(6) Y 侧帮 HAS_PULL_ROD NUMBER(1) Y 有无拉杆 ROLLER_STYLE VARCHAR2(10) Y 滚轮样式 CAN_BEAR NUMBER(1) Y 是否可背负 SUPPORTING_POWER VARCHAR2(20) Y 承重量 WATERPROOF_STRENGTH VARCHAR2(10) Y 防水强度 FOR_A4_PAPER NUMBER(1) Y 是否放A4文件 STRAP_LENGTH VARCHAR2(20) Y 肩带长度 IS_SAMPLE NUMBER(1) Y 试用装 IS_GIFT NUMBER(1) Y 赠品 ACCESSORY_GOO_ID VARCHAR2(13) Y 关联货号 ACCESSORYNAME VARCHAR2(20) Y 配件类型 SALELEVEL VARCHAR2(1) Y 畅销等级 MEMBER_PERCENT NUMBER(5,2) Y 会员折扣 IS_BREAKABLE NUMBER(1) Y 是否易碎品 PACK_SPECS_SEND NUMBER(18,4) Y 送货包装规格 PACK_VOLUME_SEND NUMBER(18,4) Y 送货包装体积 IS_QC_REQUIRED NUMBER(1) Y 是否质检 PACKBASEAMOUNT NUMBER(18,4) Y 包装基数 IS_RECEIPT NUMBER(1) Y 1 是否开票 MIN_WHOLESALERATIO NUMBER(6,4) Y 0.1 GOO_NAME_COMPARE VARCHAR2(20) Y 品名对照 RECEIPT_LASTMODIFIERID VARCHAR2(6) Y 是否开票上次更改人 RECEIPT_AUDITOR VARCHAR2(6) Y 是否开票审核人 RECEIPT_AUDITTIME DATE Y 是否开票审核时间 RECEIPT_STATUS NUMBER(1) Y 是否开票审核状态(0：不需审核，1：待审核，2：已审核) IS_NETGOODS NUMBER(1) 0 是否电商专供款 DESIGN_INSP_SRC VARCHAR2(50) Y 设计灵感来源 DESIGN_INSP_SRC_INFO VARCHAR2(50) Y 设计灵感来源信息 1.3.2 DIC_ARTICLES 字段 类型 为空 默认值 翻译 GOO_ID VARCHAR2(13) 货号 BARCODE VARCHAR2(13) 条码 COLORNAME VARCHAR2(16) 颜色 SIZENAME VARCHAR2(16) Y 码数 ORDERBASEAMOUNT NUMBER(5) Y 订货基数 ORDERSTARTAMOUNT NUMBER(18,4) Y 起订量 LACK NUMBER(1) 0 缺货 SCALE NUMBER(5) Y 订货比例 BAKCODE VARCHAR2(13) WHENTIME DATE Y ORDERENDDATE DATE Y 止订日期 DIFF_ID1 VARCHAR2(10) 差异编号1 DIFF_ID2 VARCHAR2(10) Y 差异编号2 DIFF_ID3 VARCHAR2(10) Y 差异编号3 DIFF_ID4 VARCHAR2(10) Y 差异编号4 STDCOLORVALUE NUMBER(8) Y 标准色值 STDCOLORNAME VARCHAR2(10) Y 标准色名称 COLORTYPE VARCHAR2(8) Y 色类 INSERTTIME DATE Y 新增时间 LASTMODIFYTIME DATE Y 最近修改时间 LASTPUBLISHTIME DATE Y 最近发布时间 MEMO VARCHAR2(200) Y NOT_EXCHANGE NUMBER(1) 0 禁止退换 GRAM_WEIGHT VARCHAR2(20) Y 克重 powered by GitbookFile Modify: 2021-01-25 16:48:49 "},"003part/Subdirecter2.html":{"url":"003part/Subdirecter2.html","title":"中心订单系统控制","keywords":"","body":"中心系统控制 前言：中心系统控制为三福供应链模块主要控制：流程上划分有商品订货、商品订单形成、订单变更、设置预计到货单、打印供应商送货单、调配管理、调拨作业、收货作业、RCA、供应商付款单；岗位上划分有企划、跟单、买手调配、仓库接收员、财务。 powered by GitbookFile Modify: 2021-01-25 15:47:58 "},"004part/orderbox/sub_orderbox.html":{"url":"004part/orderbox/sub_orderbox.html","title":"订货篮","keywords":"","body":"1.订货篮 1.1涉及岗位 加入订货篮（HANDLE=90003）功能主要是：地区主管、区域买手使用 加入订货篮按钮权限控制语句为： select max(1) from dual where userhasaction(%CurrentUserID%, '28,89,72')=1 and %DataShopID% in (SELECT sho_id FROM SHOP WHERE getshopproperty('AREA',SHO_ID)=1 AND PAUSE=0) 1.2程序控制 商品未禁用（PAUSE=0） 开票审核状态不能为未审核（RECEIPT_STATUS<>1） 商品必须已经定价 商品类别为：1 非集中采购商品（ISUM=0） 所选商品分部必须在该门店中经营（SHOPBRANCH） 止订日期为空或者止订日期大于当前日期 起订日期为空或者起订日期小于明天 所选商品款式和分部必须存在款式分部表（PATTERNBRANCH）且有效 所选商品不存在商品不可订门店表中（GOODSOFNOSHOP） 所选商品不存在商品不可订大区表中（GOODSOFNOAREA） 所选商品不存在缺货（LACK <>0）或者（HANDGOODS）表库存大于0 所选商品必须设置订货行程且当天必须满足订货行程（订货行程设置企划告知IT，由IT在中心-分部-订货行程设定窗口设定） 所选商品不存在门店不可选款表（NOTORDERSHOPPATTERN） 所选商品不存在分部不可选款表（NOTORDERPATTERN） 所选商品不存在不存在门店不可定商品表（NOTORDERGOODS） 所选商品不开票则不可加入试点店 1.3按钮代码 declare p_i int; p_a int; begin for item in (select Sho_ID from Shop where sho_ID in (@BUYERSHOPIDS@)) loop for item2 in (select goo_id, nvl(a.MIN_WHOLESALERATIO,0) as MIN_WHOLESALERATIO from goods where goo_id in (%selection%)) loop select max(1) into p_i from SFINTERFACE.PL_DIC_CODE_DETAIL a where a.code_value = item.sho_id and a.SUB_CODE = 'SHO_ID' and a.CODE_TYPE = 'STD_SHOP'; if p_i Is null or (p_i is not null and item2.MIN_WHOLESALERATIO =trunc(sysdate)) and exists (select 1 from PatternBranch where PatternBranch.bra_id=a.bra_id and PatternBranch.Pattern=a.Pattern and PatternBranch.Pause=0) and a.goo_id not in (select goo_id from GoodsOfNoShop where sho_id=Item.Sho_ID) and a.goo_id not in (select goo_id from GoodsOfNoArea where are_id=%Are_ID%) and (b.goo_id is not null or c.goo_id is not null or (a.YesShop is null and a.YesArea is null)) and (Lack=0 or e.HandStockAmount>0) and (instr(';'||d.WeekName||';',';'||to_char(sysdate,'day')||';')>0 or instr(';'||d.WeekName||';',';'||to_char(sysdate+1,'day')||';')>0 or trunc(sysdate)-nvl(trunc(a.PriceTime),trunc(a.CreateTime))0 or GetShopProperty('Prepare',Item.Sho_ID)=1) and not exists (Select 1 from NotOrderShopPattern where sho_ID=Item.Sho_ID and Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderPattern where Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderGoods where Sho_ID=Item.Sho_ID and goo_ID=a.goo_ID) AND A.BRA_ID NOT IN ('08') and 1 = p_a UNION ALL select distinct Item.Sho_ID,a.goo_id,nvl(OrderBaseAmount,1),sysdate,0,%CurrentUserID%, g.safeamount,a.ADVICEPRICE from goods a left join (select goo_id from GoodsOfYesShop where sho_id=Item.Sho_ID) b on a.goo_id=b.goo_id left join (select goo_id from GoodsOfYesArea where are_id=%Are_ID%) c on a.goo_id=c.goo_id left join Schedule d on a.bra_id=d.bra_id and NVL(a.GooStyle,d.GooStyle)=d.GooStyle and a.Pattern=d.Pattern left join HandGoods e on a.goo_ID=e.goo_ID LEFT JOIN pl_dic_categorygroup f ON f.categorygroupno = a.categorygroupno left join shopfirstorders g on g.sho_id=item.sho_id and g.goo_id=a.goo_id where a.goo_id in (item2.goo_id) and a.accessoryname is null and a.accessory_goo_id is null and a.goo_id not in (select goo_id from OrderBox where sho_id=Item.Sho_ID) and a.Pause=0 and a.Price is not null and a.GooTypeID='1' and a.Isum=0 and a.bra_id in (select bra_id from ShopBranch where sho_id=Item.Sho_ID and Pause=0) and (a.OrderStartDate is null or a.OrderStartDate=trunc(sysdate)) and exists (select 1 from PatternBranch where PatternBranch.bra_id=a.bra_id and PatternBranch.Pattern=a.Pattern and PatternBranch.Pause=0) and a.goo_id not in (select goo_id from GoodsOfNoShop where sho_id=Item.Sho_ID) and a.goo_id not in (select goo_id from GoodsOfNoArea where are_id=%Are_ID%) and (b.goo_id is not null or c.goo_id is not null or (a.YesShop is null and a.YesArea is null)) and (Lack=0 or e.HandStockAmount>0) and (instr(';'||d.WeekName||';',';'||to_char(sysdate,'day')||';')>0 or instr(';'||d.WeekName||';',';'||to_char(sysdate+1,'day')||';')>0 or trunc(sysdate)-nvl(trunc(a.PriceTime),trunc(a.CreateTime))0 or GetShopProperty('Prepare',Item.Sho_ID)=1) and not exists (Select 1 from NotOrderShopPattern where sho_ID=Item.Sho_ID and Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderPattern where Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderGoods where Sho_ID=Item.Sho_ID and goo_ID=A.GOO_ID) AND A.BRA_ID = '08' and A.CATEGORYGROUPNO NOT IN (255,258,260) and 1 = p_a UNION ALL select distinct Item.Sho_ID,a.goo_id,nvl(OrderBaseAmount,1),sysdate,0,%CurrentUserID%, g.safeamount,a.ADVICEPRICE from goods a left join (select goo_id from GoodsOfYesShop where sho_id=Item.Sho_ID) b on a.goo_id=b.goo_id left join (select goo_id from GoodsOfYesArea where are_id=%Are_ID%) c on a.goo_id=c.goo_id left join Schedule d on a.bra_id=d.bra_id and NVL(a.GooStyle,d.GooStyle)=d.GooStyle and a.Pattern=d.Pattern left join HandGoods e on a.goo_ID=e.goo_ID LEFT JOIN pl_dic_categorygroup f ON f.categorygroupno = a.categorygroupno left join shopfirstorders g on g.sho_id=item.sho_id and g.goo_id=a.goo_id where a.goo_id in (item2.goo_id) and a.accessoryname is null and a.accessory_goo_id is null and a.goo_id not in (select goo_id from OrderBox where sho_id=Item.Sho_ID) and a.Pause=0 and a.Price is not null and a.GooTypeID='1' and a.Isum=0 and a.bra_id in (select bra_id from ShopBranch where sho_id=Item.Sho_ID and Pause=0) and (a.OrderStartDate is null or a.OrderStartDate=trunc(sysdate)) and exists(select 1 from PatternBranch where PatternBranch.bra_id=a.bra_id and PatternBranch.Pattern=a.Pattern and PatternBranch.Pause=0) and a.goo_id not in (select goo_id from GoodsOfNoShop where sho_id=Item.Sho_ID) and a.goo_id not in (select goo_id from GoodsOfNoArea where are_id=%Are_ID%) and (b.goo_id is not null or c.goo_id is not null or (a.YesShop is null and a.YesArea is null)) and (Lack=0 or e.HandStockAmount>0) and (instr(';'||d.WeekName||';',';'||to_char(sysdate,'day')||';')>0 or instr(';'||d.WeekName||';',';'||to_char(sysdate+1,'day')||';')>0 or trunc(sysdate)-nvl(trunc(a.PriceTime),trunc(a.CreateTime))0 or GetShopProperty('Prepare',Item.Sho_ID)=1) and not exists (Select 1 from NotOrderShopPattern where sho_ID=Item.Sho_ID and Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderPattern where Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderGoods where Sho_ID=Item.Sho_ID and goo_ID=a.goo_ID) AND (EXISTS (SELECT 1 FROM firstorderforcorp WHERE GOO_ID = A.GOO_ID) or EXISTS (select 1 from ORDERBOXFORRATIO where sho_id=Item.Sho_ID and goo_id = a.goo_id) or EXISTS (select 1 from reinforce_tmp t1 inner join reinforces_tmp t2 on t1.rnf_id = t2.rnf_id where t1.sho_id=Item.Sho_ID and t2.goo_id = a.goo_id AND t1.Createtime >= ( sysdate - 3))) AND A.BRA_ID = '08' and A.CATEGORYGROUPNO IN (255,258,260) and 1 = p_a ; insert into ORDERBOXFORRATIO(sho_id,goo_id,DIFF_ID1,Amount,CreateTime,IsHand,OperatorID, Safeamount,ADVICEPRICE) select distinct Item.Sho_ID,a.goo_id,H.Diff_Id1,nvl(OrderBaseAmount,1),sysdate,0,%CurrentUserID%, g.safeamount,a.ADVICEPRICE from goods a left join (select goo_id from GoodsOfYesShop where sho_id=Item.Sho_ID) b on a.goo_id=b.goo_id left join (select goo_id from GoodsOfYesArea where are_id=%Are_ID%) c on a.goo_id=c.goo_id left join Schedule d on a.bra_id=d.bra_id and NVL(a.GooStyle,d.GooStyle)=d.GooStyle and a.Pattern=d.Pattern left join HandGoods e on a.goo_ID=e.goo_ID LEFT JOIN pl_dic_categorygroup f ON f.categorygroupno = a.categorygroupno left join shopfirstorders g on g.sho_id=item.sho_id and g.goo_id=A.GOO_ID LEFT JOIN (SELECT DISTINCT GOO_ID,DIFF_ID1 FROM ARTICLES ) h ON A.GOO_ID = H.Goo_Id where a.goo_id in (item2.goo_id) and a.accessoryname is null and a.accessory_goo_id is null and a.goo_id not in (select goo_id from ORDERBOXFORRATIO where sho_id=Item.Sho_ID) and a.Pause=0 and a.Price is not null and a.GooTypeID='1' and a.Isum=0 and a.bra_id in (select bra_id from ShopBranch where sho_id=Item.Sho_ID and Pause=0) and (a.OrderStartDate is null or a.OrderStartDate=trunc(sysdate)) and exists(select 1 from PatternBranch where PatternBranch.bra_id=a.bra_id and PatternBranch.Pattern=a.Pattern and PatternBranch.Pause=0) and a.goo_id not in (select goo_id from GoodsOfNoShop where sho_id=Item.Sho_ID) and a.goo_id not in (select goo_id from GoodsOfNoArea where are_id=%Are_ID%) and (b.goo_id is not null or c.goo_id is not null or (a.YesShop is null and a.YesArea is null)) and (Lack=0 or e.HandStockAmount>0) and (instr(';'||d.WeekName||';',';'||to_char(sysdate,'day')||';')>0 or instr(';'||d.WeekName||';',';'||to_char(sysdate+1,'day')||';')>0 or trunc(sysdate)-nvl(trunc(a.PriceTime),trunc(a.CreateTime))0 or GetShopProperty('Prepare',Item.Sho_ID)=1) and not exists (Select 1 from NotOrderShopPattern where sho_ID=Item.Sho_ID and Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderPattern where Bra_ID=a.Bra_ID and Pattern=a.Pattern) and not exists (Select 1 From NotOrderGoods where Sho_ID=Item.Sho_ID and goo_ID=a.goo_ID) AND NOT EXISTS (SELECT 1 FROM firstorderforcorp WHERE GOO_ID = A.GOO_ID) AND A.CATEGORYGROUPNO IN (255,258,260) AND A.BRA_ID = '08' and 1 = p_a ; end Loop; end Loop; end; 1.4门店订货数据生成采购单规则 1.4.1订货数据自动生成控制 Pkg_If301_Spr 门店在订货篮窗口对加入订货篮的数据进行确认订货后，系统每晚九点开始对确认订货数据进行自动推送至采购申请单 OEM类型供应商生成的采购申请单状态为工作表（0） ODM类型供应商生成的采购申请单状态为已提交（2） 鞋包分部（08）下配码比不为0的男鞋女鞋，默认为首单；否则为补单 美妆（06）淘品（07）分部有进货明细默认为补单，无进货明细默认为首单 男装、女装、内衣分部默认为补单 1.5表结构 1.5.1 orderbox 字段 类型 为空 默认值 翻译 SHO_ID VARCHAR2(4) GOO_ID VARCHAR2(13) ADVICEPRICE NUMBER(18,4) Y AMOUNT NUMBER(18,4) CREATETIME DATE (SYSDATE) ISHAND NUMBER(1) 0 OPERATORID VARCHAR2(6) SAFEAMOUNT NUMBER(18,4) Y 0 MEMO VARCHAR2(100) Y RATIOID NUMBER Y null 所用配码比,关联sizeratio4shoes,2017-03-20 ZQ362 1.5.2 orderboxlist 字段 类型 为空 默认值 翻译 SHO_ID VARCHAR2(4) GOO_ID VARCHAR2(13) BARCODE VARCHAR2(13) AMOUNT NUMBER(18,4) Y SAFEAMOUNT NUMBER(18,4) Y 0 ISORDER NUMBER(1) Y -1 MEMO VARCHAR2(100) Y DIFF_ID1 VARCHAR2(10) Y DIFF_ID2 VARCHAR2(10) Y powered by GitbookFile Modify: 2021-01-25 16:57:40 "},"004part/order_request/sub_order_req.html":{"url":"004part/order_request/sub_order_req.html","title":"采购申请单","keywords":"","body":"1.采购申请单 1.1模块说明 采购申请单共分为五个模块分别为：未完成申请单、待提交申请单、待批准申请单、已完成申请单、采购申请单明细，其中未完成申请单、待提交申请单、待批准申请单这三个模块涉及到功能操作；已完成申请单、采购申请单明细只涉及到数据查看。采购申请单涉及岗位为：企划（负责开单）、跟单（负责提单） 节点权限控制为： Select Max(1) From Dual Where (Nsfdata.Userhasaction(%Currentuserid%, '166') = 1 Or Nsfdata.Userhasaction(%Currentuserid%, '314') = 1) And (Nsfdata.GetShopProperty('Distribute',%Sho_Id%)=1) 1.2未完成申请单 1.2.1导入模式程序控制 1.2.1.1 INSERTSQL控制 数据导入新增单据时，若单品已经订货（判断订货条件为是否存在FIRSTORDERFORCORP表）则该次开单为补单，否则为首单 Select Count(*) Into p_j From Firstorderforcorp h Where h.Goo_id=Substr(:Goodsid, 0, 6); 1.2.1.2 确认生成申请单按钮控制（ACTIONID=92） 导入的收货仓库应为直流仓(GZZ或YWZ) 交货日期不能小于当前日期 禁用商品不能开单 若商品有色码必须导入色码的订货量 业务在导入商品时只能导入本部分数据 导入的商品和供应商必须是该供应商生产的 目前导入的门店只能导入门店类型为（'287', '8479', '36893', '285'）可销售门店 导入的数据中有门店为285类型，供应商代发只能为是 导入的数据中试点店商品最低批发占比不能小于等于0 导入的数据中有门店为285类型，不可与其他门店同时导入 集采类型单据必须导入门店数据 1.2.1.3余货开单确认按钮控制（ACTIONID=488） 导入的收货仓库应为直流仓(GZZ或YWZ) 交货日期不能小于当前日期 禁用商品不能开单 若商品有色码必须导入色码的订货量 业务在导入商品时只能导入本部分数据 导入的商品和供应商必须是该供应商生产的 1.2.1.4配码比开单确认导入按钮控制（PP\\CP）（ACTIONID=556） 配码比必须是系统规定的配码比（存在SIZERATIO4SHOES） 配码比订单同一个货号同一个配码比下的SKU数不能少于3个，否则无法使用配码比 配码比所对应的顾客群必须和货号的顾客群一一对应 导入的收货仓库应为直流仓(GZZ或YWZ) 交货日期不能小于当前日期 禁用商品不能开单 若商品有色码必须导入色码的订货量 业务在导入商品时只能导入本部分数据 导入的商品和供应商必须是该供应商生产的 目前导入的门店只能导入门店类型为（'287', '8479', '36893', '285'）可销售门店 导入的数据中有门店为285类型，供应商代发只能为是 导入的数据中试点店商品最低批发占比不能小于等于0 导入的数据中有门店为285类型，不可与其他门店同时导入 集采类型单据必须导入门店数据 1.2.2新建模式程序控制 1.2.2.1供应商选择按钮程序控制（PICKID=530415） 选择该分部在合作的供应商 选择对应仓库的合作的供应商 供应商等级不能为空 供应商状态为 A 供应商不能是禁用的 {DECLARE V_CNT INT; V_STRRESULT VARCHAR2(4000); BEGIN IF Getshopproperty('SECONDWAREHOUSE', %Sho_Id%) = 1 THEN V_STRRESULT := 'SELECT Sup_Id, Sup_Name, Suprank FROM Supplier a WHERE Bra_Id = ''' || %Bra_Id% || ''' AND Sho_Id In (SELECT Sho_Id FROM Shop e WHERE Getshopproperty(''DISTRIBUTE'', e.Sho_Id) = 1 AND e.Pause = 0) AND Nvl(a.Sup_Status, ''A'') = ''A'' AND Suprank IS NOT NULL AND EXISTS (SELECT 1 FROM Mv_Goods_Supplier b INNER JOIN Goods c ON c.Goo_Id = b.Goo_Id WHERE b.Sup_Id = a.Sup_Id AND c.Pause = 0)'; Else If %Ord_Id% Is Null or %goodid% is null Then v_Strresult := 'SELECT distinct a.sup_id, a.sup_name,a.SUPRANK FROM supplier a Inner Join Mv_Goods_Supplier b On a.Sup_Id = b.Sup_Id WHERE a.bra_id = ''' || %Bra_Id% || ''' AND a.Sho_Id = ''' || %Sho_Id% || ''' AND a.suprank IS NOT NULL AND Nvl(a.Sup_Status, ''A'') = ''A'' and b.pause = 0'; Else v_Strresult := 'Select Distinct a.Sup_Id, a.Sup_Name, a.Suprank From Supplier a Inner Join Mv_Goods_Supplier b On a.Sup_Id = b.Sup_Id Where a.Sho_Id = ''' || %Sho_Id% || ''' And a.Suprank Is Not Null And a.Bra_Id = ''' || %Bra_Id% || ''' And b.Pause = 0 AND Nvl(a.Sup_Status, ''A'') = ''A'' And B.Goo_Id in (select goo_id_request from orders_request where ord_id = ''' || %ord_id% || ''')'; End If; end if; :Strresult := v_Strresult; End;} 1.2.2.2触发器控制（ORDERED_REQUEST） 不能新增、修改为二级仓订单 一个采购申请单只能开一个单品 货日期不能小于当前日期 商品是否开票属性在主数据进行修改后未审核不能下单 当单据为CP单时，门店色码明细必填 当单据为CP单时，门店类型为285时，供应商代发只能为是；且不能和其他类型门店混合开单 当供应商发生变更时，系统自动更新ORDERS_REQUEST表的进价为当前供应商生产进价 鞋包分部开单时是否首单字段必填 在主数据进行修改的供应商必须进行结束修改操作，否则不能下单 供应商批发占比字段在选择供应商时系统自动赋值给ORDERED_REQUEST 在新增和修改ORDERS_REQUEST表的商品时，系统自动赋值给商品最低批发占比 1.3待提交申请单 1.3.1提交按钮程序控制 收货仓库应为直流仓(GZZ或YWZ) 当单品号订货量不等于色码汇总量时必须点击【更新总量】按钮再提交 商品订货量必须时商品的订货基数倍数 商品订货必须当前时间大于等于起订日期 已止定的商品不能提交 1.4待批准申请单 1.4.1批准按钮程序控制 商品必须是供应商所生产的商品 批准采购单时会将该供应商所生产的商品进价更新到ORDERS_REQUSET表进价字段 MERCHANDISERID更新为当前人 批准单据时是否首单字段必填 1.4.2批准按钮数据流向说明 写入ORDERED表，订单头表的创建时间为当前批准时间;更新正式订单号至NEW_ORD_ID；更新采购单状态为3；更新采购单结束时间为当前时间 写入ORDERS表，当采购单表是否质检为空时，则给默认值【是】 写入ORDERSITEM表 写入ORDERSHOPS\\ORDERSHOPSITEM门店表 更新单品（色码）单店欠货表GOODSHORT\\GOODSHORTS的订货量、欠货量 分采类型单据会进行回写订货表数据： ①更新REINFORCE_TMP表PROCESSTIME为当前时间； ②数据回写至：REINFORCE\\REINFORCES\\REINFORCESITEM 1.5表结构 1.5.1 ORDERED_REQUEST 字段 类型 为空 默认值 翻译 ORD_ID VARCHAR2(15) ORDER_SHO_ID VARCHAR2(4) Y BRA_ID VARCHAR2(2) SUP_ID VARCHAR2(5) DELIVERDATE DATE CREATETIME DATE FINISHTIME DATE Y OPERATORID VARCHAR2(6) Y CONFIRMTIME DATE Y CLOSECAUSENO NUMBER(2) Y PO_TYPE VARCHAR2(6) MERCHANDISERID VARCHAR2(6) Y MEMO VARCHAR2(200) Y PREPAYPCT NUMBER(18,4) Y NULL 预付比例 ISPREPAYED NUMBER Y 是否预付 RATIOID NUMBER(2) Y HIKERATIO NUMBER(12,4) Y STATUS NUMBER(2) Y 参考RPM_STATUS NEW_ORD_ID VARCHAR2(15) Y 生成的订单号 SECONDARYSHO_ID VARCHAR2(15) Y ISFIRSTORDERED NUMBER(2) Y NULL 是否首单：1是,0否 SEND_BY_SUP NUMBER(1) Y 是否供应商代发：1是,0否 SAMPLE_ORD NUMBER(1) Y 是否试用装：1是,0否 WHOLESALERATIO NUMBER(6,4) Y 0 批发占比 IS_MUCH_GOODS NUMBER(1) Y 是否多货：1是,0否 IS_VIRTUAL NUMBER(1) Y 0 是否虚拟订单：1是,0否 1.5.2 ORDERS_REQUEST 字段 类型 为空 默认值 翻译 ord_id varchar2(15) goo_id_request varchar2(13) inprice number(18,4) y orderstartamount number(18,4) y orderamount number(18,4) colorsize blob y deliverdate date y confirmamount number(18) y confirmdeliverdays number(38) y fabricdays number(38) y cutdays number(38) y needledays number(38) y technicsdays number(38) y tidyupdays number(38) y productstatus varchar2(6) y pd_sup_id varchar2(5) y memo varchar2(300) y supsendgoodsdate date y material_source varchar2(8) y r_sup_name varchar2(128) y is_late varchar2(300) y r_lathe_num number y p_lathe_num number y confirmtime date y confirmid varchar2(6) y audittime date y p_processid number y r_processid number y prearrivetime date y reasoncode number(2) y inprice_notax number(20,4) y tax_rate number(12,4) y isfirstordered number(2) y null 是否首单：1是,0否 outdays number(38) y is_qc_required number(1) y 1 是否质检 urgency number(1) y 5 紧急度 1.5.3 ORDERSITEM_REQUEST ORD_ID VARCHAR2(15) GOO_ID_REQUEST VARCHAR2(13) BARCODE_REQUEST VARCHAR2(13) ORDERAMOUNT NUMBER(18,4) MEMO VARCHAR2(100) Y powered by GitbookFile Modify: 2021-01-25 17:00:44 "},"004part/ordered/sub_ordered.html":{"url":"004part/ordered/sub_ordered.html","title":"订单","keywords":"","body":"1.订单 1.1涉及岗位 业务所说的订单指的是采购单批准后的正式订单和熊猫订单窗口有所区别；本章节主要讲述的时涉及到订单的相关控制。订单涉及到的岗位有：备货员、调配、分部调价员、分货员、接收员、收货员、商品变价员、验货员 select max(1) from dual where (GetShopProperty('distribute',%sho_id%)=1 or GetShopProperty('SECONDWAREHOUSE',%sho_id%)=1) or (UserHasAction(%CurrentUserID%,'40,315')=1 and UserHasAction(%CurrentUserID%,'24,26,166')=1) 1.2程序控制 1.2.1待收货订单模块程序控制 1.2.1.1界面修改权限控制 修改语句可设置分货控制规则、分货控制店具体如下： update ORDERED set ACC_CTRL_RULE = :ACC_CTRL_RULE, ACC_CTRL_SHOPS = :ACC_CTRL_SHOPS, ACC_CTRL_EDITORID = %CurrentUserID%, ACC_CTRL_UPDTIME = SYSDATE where ORD_ID = :OLD_ORD_ID 1.2.1.2按钮权限控制 1、更改交货日期按钮 按钮权限控制语句 select max(1) from dual where UserHasAction(%CurrentUserID%,40)=1 and UserHasAction(%CurrentUserID%,'24,26')=1 已经结束的订单不能修改交货日期 已经更改过交货日期的单据不能再次修改 订单未提取不可更改交货日期 更改的交货日期必须大于之前的交期 新交货日期与原交货日期相同，无需更改 设定的新交货日期不能比原交货日期大40天 2、更改批发占比按钮 批发占比只能在0~1之间 按钮权限控制 SELECT MAX(1) FROM Mvusers a WHERE a.Userid = UPPER(%currentuserid%) AND a.Jobname IN ('跟单主管','跟单专员','跟单经理') 按钮语句 Declare P_I int; Begin if @WHOLESALERATIO@ > 1 then raise_application_error(-20002,'批发占比只能在0~1之间！'); end if; update ordered set WHOLESALERATIO = @WHOLESALERATIO@ where ord_id in (%Selection%); end; 3、更改是否质检按钮 只能设置存在已经结束并且未传WMS的预计到货单的订单 按钮语句 Update Asnorders a Set a.Is_Qc_Required = Case When @Is_Qc_Required@ = '是' Then 1 Else 0 End Where Exists (Select 1 From Ordered b Inner Join Asnordered c On b.Ord_Id = c.Ord_Id Where b.Ord_Id In (%Selection%) And c.Asn_Id = a.Asn_Id and c.finishtime is not null And c.Lastpublishtime Is Null) 4、结束订单 5、开始收货 6、录入QC专员 7、录入跟单员 8、设置送货单 9、提取订单 ​ ​ powered by GitbookFile Modify: 2021-01-26 18:07:41 "},"004part/asnordered/sub_asnorder.html":{"url":"004part/asnordered/sub_asnorder.html","title":"预计到货单","keywords":"","body":"预计到货单 供应链管 理部 powered by GitbookFile Modify: 2021-01-17 18:13:34 "},"004part/asnorderpacks/sub_asnorderpacks.html":{"url":"004part/asnorderpacks/sub_asnorderpacks.html","title":"收货标签","keywords":"","body":"收货标签 供应链管 理部 powered by GitbookFile Modify: 2021-01-17 18:13:38 "},"005part/sub_Fin_regulation.html":{"url":"005part/sub_Fin_regulation.html","title":"财务规范化系统控制","keywords":"","body":"1.财务规范化-主数据控制 1.1财务规范化-供应商相关控制 1.1.1主供应商新增/修改相关控制 必填字段：供应商名称、联系人、电话号码、注册地址、供应商类型、供应商状态、公司类型、省份、城市、区县、法人代表、级别、票种、纳税人身份、社会信用代码。 其中供应商名称只能包含中文或者括号，供应商名称不能重复，供应商名称不能超过100个字符 票种分为：普票、专票 纳税人身份分为：小规模纳税人、一般纳税人 社会信用代码：不能重复 在修改供应商时已经结束修改的供应商，不能再结束修改。 修改供应商时只能修改当前用户修改的记录，若需修改他人记录，则需点击后修改 预付功能：预付比例、预付开始时间、预付结束时间，预付比例一旦设置则预付开始时间、结束时间不能为空 1.1.2主/辅供应商继承关系 子供应商在主供应商新增完成后点击结束修改按钮，子供应商自动继承（除仓库、分部、供应商状态、供应商级别、供应商批发占比、供应商加价比例、备注外）主供应商的其他属性 Select * From mdmsys.actions a Where a.actionid = 9050; 子供应商设置了仓库和分部后如果数据已经传给中心那么将不能再修改 Create Or Replace Trigger Tr_Bf_IU_DIC_Supplier Before Insert or Update on MDMDATA.DIC_SUPPLIER For each Row Begin If :New.Parentid Is Null And :New.Sup_Name <> :Old.Sup_Name And Lengthb(:New.Sup_Name) > 100 Then Raise_Application_Error(-20002, '供应商名称不能超过100个字符！'); End If; If Inserting Then If :New.Parentid Is Null And :New.Sup_Name <> Nvl(:Old.Sup_Name, ' ') Then :New.Sup_Name := :New.Sup_Name || '*'; End If; Elsif Updating Then If (:Old.Lastpublishtime Is Not Null Or :New.Lastpublishtime Is Not Null) And :Old.Sho_Id <> :New.Sho_Id Then Raise_Application_Error(-20002, '已经发布的供应商数据不可修改仓库！'); End If; End If; End; 已经发布的子供应商除供应商状态、供应商级别、供应商批发占比、供应商加价比例、备注外其他属性不能修改 1.2财务规范化-商品相关控制 映射字段、税票编码、执行标准、安全技术类别：根据商品税票编码基础表数据给默认值（DIC_CLS_TAX） 最低批发占比：所有分部开票供应商设置为【0.1】 小规模税率：所有分部默认值为【0.01】 select 0.10 MIN_WHOLESALERATIO,0.01 small_taxrate from dual 2.财务规范化-中心控制 2.1财务规范化-订货篮订货功能控制 所选商品如果不开票则不可加入试点店 Select * From Sfsys.Handles a Where A.handleid = 90003 2.2财务规范化-采购单控制（SP\\CP） 导入的数据中试点店商品最低批发占比不能小于等于0 供应商批发占比字段在选择供应商时系统自动赋值 create or replace trigger TR_UPDATE_WHOSALERATIO before UPDATE OF SUP_ID ON ordered_request for each ROW Declare P_I NUMBER(6,4); BEGIN if :new.SUP_ID is not null THEN select s.wholesaleratio into p_i from supplier s where s.sup_id=:new.SUP_ID; :new.wholesaleratio := p_i; end if; END 在新增和修改ORDERS_REQUEST表的商品时，系统自动将商品的最低批发占比赋值给最低批发占比字段 如商品是不开票则不能下单给试点店 2.3财务规范化-ASN预约控制（SP\\CP） 如商品是不开票则不分货给试点店，系统自动将试点店订货量分给GZY PAutoAssign 2.4财务规范化-调配控制 目前系统控制已经取消，不管开票是否都可调配至试点店 2.5财务规范化-调拨单控制 试点店商品可调拨至非试点店、电商、试点店 非试点店商品可以调拨至非试点店 非试点店不开票商品不能调拨至试点店、电商 非试点店开票商品可调拨至试点店、电商 电商商品可调拨至试点店、非试点店 目标店接受商品时不控制商品是否开票与门店属性关系 仓库调拨至试点店/电商的商品，若包已发出则不控制；否则只能开票的商品调拨至试点店/电商 --试点店 select code_value from sfinterface.pl_dic_code_detail e where sub_code ='SHO_ID' and pause=0 and code_type='STD_SHOP' --电商 select code_value from sfinterface.pl_dic_code_detail where sub_code ='SHO_ID' and pause=0 and code_type='ON_SHOP 2.6 财务规范化-预付比例控制 发起预付款系统默认付款方广州，可编辑修改 付款方是广州，预付累计金额不能超订单总金额预付比例,如果预付款比例为100%，则广州付款金额不能超订单总金额预付比例*（1-批发比例） 付款方修改为平潭则预付平潭累计金额不能超订单总金额预付比例批发比例 多次预付累计总金额不能超供应商订单总金额*预付比例 发起申请时间，必须是供应商预付款比例的有效期间，供应商主档有该预付款的有效起始时间，有效截止时间 预付与应付对冲逻辑：在生成应付单后按订单+付款方自动扣减预付金额 powered by GitbookFile Modify: 2021-01-27 16:10:50 "}}